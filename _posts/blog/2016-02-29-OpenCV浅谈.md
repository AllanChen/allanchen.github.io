---
layout:     post
title:      浅谈OpenCV植入广告
category:   blog
description: OpenCV是一个基于BSD许可（开源）发行的跨平台计算机视觉库，可以运行在Linux、Windows和Mac OS操作系统上。它轻量级而且高效——由一系列 C 函数和少量 C++ 类构成，同时提供了Python、Ruby、MATLAB等语言的接口，实现了图像处理和计算机视觉方面的很多通用算法。
---
随着公司的业务的发展有幸接触到OpenCV 这个图形库，这边文章主要是总结一下在Mac 上使用OpenCV遇到的各种坑和记录如何能够快速入门OpenCV。

### OpenCV 是什么：
OpenCV的全称是：Open Source Computer Vision Library。OpenCV是一个基于BSD许可（开源）发行的跨平台计算机视觉库，可以运行在Linux、Windows和Mac OS操作系统上。它轻量级而且高效——由一系列 C 函数和少量 C++ 类构成，同时提供了Python、Ruby、MATLAB等语言的接口，实现了图像处理和计算机视觉方面的很多通用算法。
OpenCV用C++语言编写，它的主要接口也是C++语言，但是依然保留了大量的C语言接口。该库也有大量的Python, Java and MATLAB/OCTAVE (版本2.5)的接口。这些语言的API接口函数可以通过在线文档获得。如今也提供对于C#,Ch, Ruby的支持。 本文不做过多的基本介绍，想了解请点击 [详细介绍](http://baike.baidu.com/link?url=uXKQmm6cNEumNPt9Cbx-R4OWNro9jBvYMVGhIU5OhXdTyPcBDlaL2UThxRqjG2gGHKjIGAmymw_YhTXtLYc68q)

知道它是什么之后，以为这你可以使用它做很多有趣的图形，图像识别，图像重绘等工作。**我所做的项目需求是要在一个视频上无缝的植入一个广告**。这听起来好像好高大上，但其实分析之后可以由OpenCV里面的一些函数直接打点实现。下面先看一个老外的例子：[JavaScript-Motion-tracking](http://www.soundstep.com/blog/2012/03/19/javascript-motion-tracking/)

### 分析例子：
上述例子主要涉及到的技术点主要有两个：**追踪ROI** 和 **图片Transform**
1. 追踪ROI 是比较有难度的所幸的是我们有很多的解决办法，**例子中的作者用来追踪点的方式来简化这个过程（Tracking  Point）**
2. 有了Tracking Data 之后剩下的就是如何图片Transform了，js上做这个的有两种方法。   
第一：直接上[框架](https://github.com/AllanChen/allanchen.github.io/blob/master/resource/perspective.js)，严格来说这只是一个可以根据Tracking Data 来改变图片形状的JS。   
第二：CSS 直接使用CSS3的变形属性就可以了。   
**例子采取了第一种方式**，但我反而推荐的是CSS3的变形属性。

到此，这个例子主要的逻辑和技术点已经分析清楚了。接下来就要对每个点进行一些讲解和我自己项目中使用到哪些点以及最终的Demo。